<div>
	{{>header}}
	<div class="wrapper">
		{{>sidebar}}

		<div id="content" class="container-fluid">
			{{#if errorMsg}}
			{{>error}}
			{{/if}}
			{{#if successMsg}}
			{{>success}}
			{{/if}}
			<div class="m-3 p-3 mt-4">

				<form method="POST" action="/student/create-student" id="add-student" enctype="multipart/form-data">
					<div class="row d-flex">
						<div class="col-md-4 col-xs-12 ">
							<div class="mb-3">
								<select name="batch" required class="form-select select2-single">
									{{#select data.batch}}
									<option value="">Cohort Name</option>
									{{#each batchList}}
									<option value="{{this._id}}">{{this.name}}</option>
									{{/each}}
									{{/select}}
								</select>
							</div>
						</div>
					</div>
					<hr>
					<div id="studentInfo" class="row">
						<div class="col-md-4 col-xs-12">
							<div class="form-floating mb-3">
								<input value="{{data.fullName}}" name="fullName" required type="text"
									class="form-control" id="fullName">
								<label for="fullName">Full Name</label>
							</div>
						</div>
						<div class="col-md-4 col-xs-12">
							<div class="form-floating mb-3">
								<input value="{{data.mobile}}" name="mobile" required type="text" class="form-control"
									id="mobile">
								<label for="mobile">Mobile Number</label>
							</div>
						</div>

					</div>
					<div id="student_fields">

					</div>

					<button class="btn btn-success" type="button" onclick="student_fields();"> + Add Student </button>
					<div class="mt-4 mb-4">
						<button class="btn btn-success btn-md" type="submit">Save</button>
					</div>
				</form>

				<h4>Bulk Upload</h4>
				<hr>

				<form method="POST" action="/student/create-student-bulk" id="add-bulk-students"
					enctype="multipart/form-data">
					<div class="row d-flex">
						<div class="col-md-4 col-xs-12 ">
							<div class="mb-3">
								<select name="batch" required class="form-select select2-single">
									{{#select data.batch}}
									<option value="">Cohort Name</option>
									{{#each batchList}}
									<option value="{{this._id}}">{{this.name}}</option>
									{{/each}}
									{{/select}}
								</select>
							</div>
						</div>
					</div>
					<div class="row mt-6">
						<div class="col-md-4 col-xs-12 mb-3">
							<input required type="file" name="csvfile" id="formFile" accept=".csv" class="form-control">
							<button type="submit" class="btn btn-success mt-4">Upload</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script>
	window.addEventListener('DOMContentLoaded', (event) => {
		setTimeout(function () {
			$('#sidebar #students')[0].click();
			let currentSubPage = $('#sidebar .studentsSubMenu')[0];
			$(currentSubPage).addClass('active')

			$('.select2-single').select2();
		}, 200);
	});

	var room = 1;
	function student_fields() {

		room++;
		var objTo = document.getElementById('student_fields')
		var divtest = document.createElement("div");
		divtest.setAttribute("class", "form-group removeclass" + room);
		var rdiv = 'removeclass' + room;
		divtest.innerHTML = '<div id="studentInfo" class="row"> <div class="col-md-4 col-xs-12">	<div class="form-floating mb-3">	<input  name="fullName" required type="text" class="form-control" id="fullName"> <label for="fullName">Full Name</label>	</div>	</div> <div class="col-md-4 col-xs-12">	<div class="form-floating mb-3">	<input  name="mobile" required type="text" class="form-control" id="mobile"> <label for="mobile">Mobile Number</label> </div> </div>  <button style="height:35px;" class="btn btn-danger col" type="button" onclick="remove_fields(' + room + ');"> <span class="glyphicon glyphicon-minus" aria-hidden="true"> delete</span> </button>	</div>';

		objTo.appendChild(divtest)
	}
	function remove_fields(rid) {
		$('.removeclass' + rid).remove();
	}


</script>